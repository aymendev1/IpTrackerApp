<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ip Tracker</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
    <section>
        <div class="container-fluid d-flex flex-column justify-content-top topone ">
            <h1 class="Page-title">IP Address Tracker</h1>
            <div class="searchbox">
                <button type="submit" class="btn-search" id="locateIP"> Find my IP address </button>
            </div>
        </div>
        <div class="secondone container-fluid justify-content-center ">
            <div class="d-flex justify-content-center flexB mx-auto">
                <div class="detailsbox">
                    <span class="title">IP ADRESS</span>
                    <p class="info" id="ip"></p>
                </div>
                <div class=" detailsbox">
                    <span class="title">LOCATION</span>
                    <p class="info" id="location"></p>
                </div>
                <div class=" detailsbox">
                    <span class="title">TIMEZONE</span>
                    <p class="info" id="timezone"></p>
                </div>
                <div class=" detailsbox">
                    <span class="title">ISP</span>
                    <p class="info" id="isp"></p>
                </div>

            </div>
        </div>
    </section>

</body>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"></script>
<script>
    const getIpBtn = document.getElementById("locateIP")
    const ip = document.getElementById("ip")
    const loc = document.getElementById("location")
    const isp = document.getElementById("isp")
    const tz = document.getElementById("timezone")

    getIpBtn.addEventListener('click', () => getdata())

    //function to fetch data from the backend
    async function getdata() {
        const data = await fetch('http://localhost:3000/ip/info');
        const IP = await data.json();

        ip.innerText = IP.data.ip;
        loc.innerText = IP.data.city;
        isp.innerText = IP.data.organization;
        tz.innerText = IP.data.time_zone.current_time.substr(24);
    }
</script>

</html>